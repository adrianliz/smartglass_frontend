<mat-card class="h-100 mat-elevation-z8 rounded-lg">
	<mat-card-header>
		<mat-card-title *ngIf="chartName">{{chartName}}</mat-card-title>
		<mat-card-title *ngIf="tableName">{{tableName}}</mat-card-title>
	</mat-card-header>
	<mat-card-content>
		<app-loading *ngIf="loading; else showStatistic"></app-loading>

		<ng-template #showStatistic>
			<app-error-message *ngIf="error" [message]="error"></app-error-message>

			<ng-container *ngIf="chart">
				<canvas *ngIf="chart.data.length > 0; else noData" baseChart
				        [data]="chart.data"
				        [labels]="chart.labels"
				        [chartType]="chart.type">
				</canvas>
			</ng-container>
			<ng-container *ngIf="table">
				<table *ngIf="table.dataSource.data.length > 0; else noData" mat-table [dataSource]="table.dataSource"
				       class="w-100">
					<ng-container *ngFor="let column of table.columns" matColumnDef="{{column}}">
						<mat-header-cell *matHeaderCellDef>{{column}}</mat-header-cell>
						<mat-cell *matCellDef="let element">{{element[column]}}</mat-cell>
					</ng-container>

					<mat-header-row *matHeaderRowDef="table.columns"></mat-header-row>
					<mat-row *matRowDef="let row; columns: table.columns;"></mat-row>
				</table>
			</ng-container>
		</ng-template>

		<ng-template #noData>
			<img class="img-thumbnail rounded mx-auto d-block" src="assets/img/noimage.png" alt="no image">
		</ng-template>

		<mat-paginator [hidden]="!table || table.dataSource.data.length == 0"
		               [pageSizeOptions]="[5, 10, 20]"
		               showFirstLastButtons>
		</mat-paginator>
	</mat-card-content>
	<mat-card-actions>
		<mat-select (valueChange)="updatePeriod($event)" [value]="defaultPeriod[0]">
			<mat-option *ngFor="let tuple of periodOptions | keyvalue" [value]="tuple.key">{{tuple.value}}</mat-option>
		</mat-select>
	</mat-card-actions>
</mat-card>
