<mat-card class="h-100 mat-elevation-z8 rounded-lg">
	<mat-card-header>
		<mat-card-title>{{statisticName}}</mat-card-title>
	</mat-card-header>
	<mat-card-content>
		<app-loading *ngIf="loading; else showStatistic"></app-loading>

		<ng-template #showStatistic>
			<app-error-message *ngIf="error" [message]="error"></app-error-message>

			<ng-container *ngIf="chart">
				<canvas *ngIf="chart.data.length > 0; else noData" baseChart
				        [data]="chart.data"
				        [labels]="chart | displayedLabels"
				        [chartType]="chart.type">
				</canvas>
			</ng-container>
			<ng-container *ngIf="table">
				<table *ngIf="table.dataSource.data.length > 0; else noData" mat-table [dataSource]="table.dataSource"
				       class="w-100">
					<ng-container *ngFor="let column of table.columns" matColumnDef="{{column.id}}">
						<mat-header-cell *matHeaderCellDef>{{column.header}}</mat-header-cell>
						<mat-cell *matCellDef="let element">{{element[column.id]}}</mat-cell>
					</ng-container>

					<mat-header-row *matHeaderRowDef="table | tableKeys"></mat-header-row>
					<mat-row *matRowDef="let row; columns: table | tableKeys;"></mat-row>
				</table>
			</ng-container>
		</ng-template>

		<ng-template #noData>
			<img class="img-thumbnail rounded mx-auto d-block" src="assets/img/noimage.png" alt="data no available">
		</ng-template>

		<!-- Despite of implementation of mat-paginator hidden is needed and not ngIf -->
		<mat-paginator [hidden]="!table || table.dataSource.data.length == 0"
		               [pageSizeOptions]="[5, 10, 20]"
		               showFirstLastButtons>
		</mat-paginator>
	</mat-card-content>
	<mat-card-actions>
		<mat-select (valueChange)="updatePeriod($event)" [value]="periods[0].id">
			<mat-option *ngFor="let period of periods" [value]="period.id">{{period.name}}</mat-option>
		</mat-select>
	</mat-card-actions>
</mat-card>
